[[runs]]
expr = '''

NB. adventofcode 2022 day1
s =: 0 : 0
1000
2000
3000

4000

5000
6000

7000
8000
9000

10000
)

d1p1=: >./ +/ &> ". }: s rplc (LF,LF);';';LF;' '
d1p2=: +/ 3 {. \:~ +/ &> ". }: s rplc (LF,LF);';';LF;' '

d1p1; d1p2
'''
output = '''
┌─────┬─────┐
│24000│45000│
└─────┴─────┘'''
encoded = '''
e3,2,02,01,02,38,6,
e3,04,01,,c05d,
e3,04,01,,c8af'''

[[runs]]
expr = '''

NB. adventofcode 2022 day2
s2=:(,;._2~ LF=]) 0 : 0
A Y
B X
C Z
)

NB. A rock B paper C scissors
NB. X rock Y paper Z scissors

wins=:(,;._2~ LF=]) 0 : 0
A Y
B Z
C X
)

draws=: (,;._2~ LF=]) 0 : 0
A X
B Y
C Z
)

scores=: ". (}."1 s2) rplc ;/'X1Y2Z3'
scores =: scores + (6 * s2 e. wins) + (3 * s2 e. draws)

d2p1=: +/scores

NB. day 2 part 2
NB. X lose, Y draw, Z win
scores=: ". (}."1 s2) rplc ;/'X0Y3Z6'
NB. A1, B2, C3
hands=: ". }: (LF;';') rplc~  0 : 0
'A X';'3'
'A Y';'1'
'A Z';'2'
'B X';'1'
'B Y';'2'
'B Z';'3'
'C X';'2'
'C Y';'3'
'C Z';'1'
)
points =: ". _1 ,\ s2 rplc hands
d2p2=: +/ scores + points

d2p1; d2p2
'''
output = '''
┌──┬──┐
│15│12│
└──┴──┘'''
encoded = '''
e3,2,02,01,02,38,6,
e3,04,01,,0f,
e3,04,01,,0c'''

[[runs]]
expr = '''
NB. Diamond Kata

NB.    dia 'ABCD'
NB. ---A---
NB. --B-B--
NB. -C---C-
NB. D-----D
NB. -C---C-
NB. --B-B--
NB. ---A---

dia =: {{ (] ,"1 }.@|."1) ([ , }.@|.) (>:i. #y) |."0 1 (,. ,"1 (<:@# # '-'&[)) y}}

dia 'ABCD'
'''
output = '''
---A---
--B-B--
-C---C-
D-----D
-C---C-
--B-B--
---A---'''
encoded = 'e3,02,31,02,07,07,2d2d2d412d2d2d2d,2d422d422d2d2d43,2d2d2d432d442d2d,2d2d2d442d432d2d,2d432d2d2d422d42,2d2d2d2d2d412d2d,2d'

[[runs]]
expr = '''
NB. should be pulled in from stdlib.ijs
split =: ({. ,&< }.)

s3 =: 0 : 0
vJrwpWtwJgWrhcsFMMfFFhFp
jqHRNqRjqzjGDLGLrsFMfFZSrLrFZsSL
PmmdzqPrVvPwwTWBwg
wMqvLMZHhHMvwLHjbvcjnnSBnvTQFn
ttgJtRGJQctTZtZT
CrZsJsPPZsGzwwsLwLmpwMDw
)
s3 =: (LF=s3) < ;._2 s3

rucksacks =: (-:@# split ]) &> s3
dups =: ([: ([: ~. e./ # {.) [: > -:@# split ]) &> s3
alphabet =: a. {~ (96+i.27),(65+i.26)

d3p1=: +/ alphabet i. dups

NB. day 3 part 2

groups =: _3 ]\ s3

badge =: {{
's1 s2 s3'=. y
~. s1 #~ (s1 e. s2) *. (s1 e. s3)
}}

badges =: badge"1 groups

d3p2 =: +/ alphabet i. badges

d3p1; d3p2
'''
output = '''
┌───┬──┐
│157│70│
└───┴──┘'''
encoded = '''
e3,2,02,01,02,38,68,
e3,04,01,01,01,9d,
e3,04,01,01,01,46'''

[[runs]]
expr = '''
a =: {{
b =: 6
x + b
}}
5 a 7
'''
output = '11'
encoded = 'e3,04,01,,0b'

[[runs]]
expr = '''
a=: <;._2 ] 'Try and try and try again '
(~. a); (=a); (= <'and')
'''
output = '''
┌───────────────────┬───────────┬─┐
│┌───┬───┬───┬─────┐│1 0 0 0 0 0│1│
││Try│and│try│again││0 1 0 1 0 0│ │
│└───┴───┴───┴─────┘│0 0 1 0 1 0│ │
│                   │0 0 0 0 0 1│ │
└───────────────────┴───────────┴─┘'''
encoded = '''
e3,2,03,01,03,4,4801,9801,
e3,2,04,01,04,48,78,a8,d8,
e3,02,03,01,03,547279,
e3,02,03,01,03,616e64,
e3,02,03,01,03,747279,
e3,02,05,01,05,616761696e,
e3,01,18,02,04,06,0100000000000001,00010000000001,0100000000000001,,
e3,01,01,02,01,01,01'''

[[runs]]
expr = '''
double_greater =: {{
  hack =: x
  if. x > y do.
    b =: x
  else.
    b =: y
  end.
  b * 2
}}
(6 double_greater 5); (4 double_greater 3)
'''
output = '''
┌──┬─┐
│12│8│
└──┴─┘'''
encoded = '''
e3,2,02,01,02,38,6,
e3,04,01,,0c,
e3,04,01,,08'''

[[runs]]
expr = '''
s =: 0 : 0
hello world
I love horses
)
s
'''
output = '''
hello world
I love horses'''
encoded = 'e3,02,1a,01,1a,68656c6c6f20776f,726c640a49206c6f,766520686f727365,730a'

[[runs]]
expr = '''
s =: 0 : 0
nznrnfrfntjfmvfwmzdfjlvtqnbhcprsg
)

parse =: <
general =: [: ; {{ x + 1 i.~ (x = [: #@:~. x {. ])\. y }} &.>
a =: 4 general ]
b =: 14 general ]
(a parse s); (b parse s)
'''
output = '''
┌──┬──┐
│10│29│
└──┴──┘'''
encoded = '''
e3,2,02,01,02,38,68,
e3,04,01,01,01,0a,
e3,04,01,01,01,1d'''

[[runs]]
expr = '''
s =: 5
s
'''
output = '5'
encoded = 'e3,04,01,,05'

[[runs]]
expr = '''
s6 =: 0 : 0
mjqjpqmgbljsphdztnvjfqwrcgsmlb
)

d6p1 =: (4 + 4 i.~ 4 #@~.\ ]) s6

d6p2 =: (14 + 14 i.~ 14 #@~.\ ]) s6

d6p1; d6p2
'''
output = '''
┌─┬──┐
│7│19│
└─┴──┘'''
encoded = '''
e3,2,02,01,02,38,6,
e3,04,01,,07,
e3,04,01,,13'''

[[runs]]
expr = '''
y=: 3 3 $ 'abcdef'
y ; (~.y) ; (=y)
'''
output = '''
┌───┬───┬─────┐
│abc│abc│1 0 1│
│def│def│0 1 0│
│abc│   │     │
└───┴───┴─────┘'''
encoded = '''
e3,2,03,01,03,4,8,b8,
e3,02,09,02,03,03,6162636465666162,63,
e3,02,06,02,02,03,616263646566,
e3,01,06,02,02,03,0100010001'''
